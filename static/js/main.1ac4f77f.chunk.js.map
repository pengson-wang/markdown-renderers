{"version":3,"sources":["webpack:///./src/index.sass?32da","webpack:///./src/app.sass?d855","states/general.ts","services/github/index.ts","states/github.ts","states/markdown.ts","states/preferences.ts","pages/home.tsx","pages/preferences.tsx","states/send-msg.ts","App.tsx","index.tsx","../../shared/lib/index.js"],"names":["makeMsg","type","content","id","nanoid","isValidMsg","msg","Array","length","$fromMsg","fromEvent","window","pipe","map","e","data","tap","console","log","filter","shareReplay","send","parent","postMessage","sendReadySignal","Msg","From","Iframe","Category","IframeReady","$input","category","InputChange","throttleTime","asyncScheduler","leading","trailing","distinctUntilChanged","editURLSchema","$parent","Path","href","match","host","owner","repo","path","take","$host","p","$owner","$repo","$path","BASE","_baseHeaders","getHeaders","additionHeaders","makeURL","parts","URL","urljoin","toString","get","from","options","query","fetch","method","headers","getRepoContents","branch","URLSearchParams","Accept","getJson","resp","status","indexOf","json","body","Error","statusText","text","getBranches","perPage","page","getFileContent","encoding","base64","decode","_allTree","getTree","tree","regExp","RegExp","test","BehaviorSubject","subscribe","$branches","ReplaySubject","combineLatest","op","branches","next","error","$branchNames","Boolean","name","names","reduce","a","c","segments","split","current","segName","nameTree","$branch","branchNames","pathSegs","i","branchSegs","push","join","$fileRelativePath","replace","$filePath","computePath","pwd","charAt","j","indexP","ep","slice","resolvedPath","resolvedParent","lastIndexOf","getAbsolutePath","linkMap","Map","imageRegex","isPublicURL","src","markdown$","input","filePath","links","matchAll","alt","substring","Promise","all","origin","has","imagePath","set","resolvedLink","markdown","forEach","plugins$","selectedPlugin$","preferences$","plugins","selectedPlugin","LoadState","PluginsLoader","cache","plugin","tagName","Loading","Loaded","url","script","document","createElement","appendChild","setup_markdown_renderer","Failed","pluginLoader","plugin$","find","pluginToTag","isLoading","isLoaded","debug","load","catch","err","alert","tag$","msg$","metadata","Home","useObservable","Tag","useEffect","Plugin","createdAt","updatedAt","selected","handleClick","useCallback","toLocaleDateString","Plugins","useState","show","setShow","handleCreate","handleClose","setPlugin","handleOk","md5","Date","value","target","Preferences","sendPreferences","info","Toolbar","App","ReactDOM","render","getElementById","Object","defineProperty","exports","_nanoid","require","_Msg","Phase"],"mappings":"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","file":"static/js/main.1ac4f77f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import { nanoid } from 'nanoid'\r\nimport { fromEvent, asyncScheduler, Observable } from 'rxjs'\r\nimport { map, take, shareReplay, throttleTime, distinctUntilChanged, filter, tap } from 'rxjs/operators'\r\nimport { Msg } from 'shared'\r\n\r\nexport function makeMsg<T>(type: Msg.Type, content: T) {\r\n  return {\r\n    id: nanoid(),\r\n    type: type,\r\n    content: content,\r\n  } as Msg.Msg<T>\r\n}\r\n\r\nfunction isValidMsg(msg: any) {\r\n  if (msg) {\r\n    return typeof msg.id === 'string' && msg.type instanceof Array && msg.type.length >= 2\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nconst $fromMsg = fromEvent(window, 'message').pipe(\r\n  map((e) => (e as MessageEvent).data as Msg.Msg<any>),\r\n  tap((data) => {\r\n    console.log(`Received Message(Not verified):\\n`)\r\n    console.log(data)\r\n  }),\r\n  filter((data) => isValidMsg(data)),\r\n  tap((data) => {\r\n    console.log(`Received Message:\\n`)\r\n    console.log(data)\r\n  }),\r\n  shareReplay(10)\r\n)\r\n\r\nexport function send<T>(msg: Msg.Msg<T>) {\r\n  window.parent.postMessage(msg, '*')\r\n}\r\n\r\nexport function sendReadySignal() {\r\n  console.log('send appready signal')\r\n  send(makeMsg([Msg.From.Iframe, Msg.Category.IframeReady], true))\r\n}\r\n\r\nconst $input = $fromMsg.pipe(\r\n  filter(({ type: [, category] }) => category === Msg.Category.InputChange),\r\n  map(({ content }) => content as string),\r\n  throttleTime(100, asyncScheduler, {\r\n    leading: true,\r\n    trailing: true,\r\n  }),\r\n  distinctUntilChanged()\r\n)\r\n\r\ninterface Parent {\r\n  host: string\r\n  owner: string\r\n  repo: string\r\n  path: string\r\n}\r\n\r\n//eslint-disable-next-line\r\nconst editURLSchema = /^https?:\\/{2}([^\\/]+)\\/([^\\/]+)\\/([^\\/]+)\\/edit\\/([\\w\\W]+)/\r\n// editURL is like https//{{host}}/{{owner}}/{{repo}}/edit/{{branch_name}}\r\n// e.g. https://github.com/wangpin34/materials/edit/main/README.md\r\n\r\nconst $parent: Observable<Parent> = $fromMsg.pipe(\r\n  filter(({ type }) => type[1] === Msg.Category.Path),\r\n  map(({ content }) => content as string),\r\n  map((href) => {\r\n    const [, host, owner, repo, path] = href.match(editURLSchema) as [string, string, string, string, string]\r\n    return {\r\n      host,\r\n      owner,\r\n      repo,\r\n      path,\r\n    } as Parent\r\n  }),\r\n  shareReplay(1),\r\n  take(1)\r\n)\r\nconst $host = $parent.pipe(map((p) => p.host))\r\nconst $owner = $parent.pipe(map((p) => p.owner))\r\nconst $repo = $parent.pipe(map((p) => p.repo))\r\n\r\n// path is like {{branch_name}}{{file_path}}\r\nconst $path = $parent.pipe(\r\n  map((parent) => parent.path),\r\n  tap((path) => console.log(`path=${path}`))\r\n)\r\n\r\nexport { $input, $parent, $host, $owner, $repo, $path }\r\n","/*\r\n * Author: Wang Pin <pin.wang@hp.com>\r\n *\r\n * © Copyright 2021 HP Development Company, L.P.\r\n */\r\n\r\nimport urljoin from 'url-join'\r\nimport base64 from 'base-64'\r\nimport { getUsername, getPassword } from './settings'\r\n\r\nconst BASE = 'https://api.github.com'\r\n\r\ninterface Headers {\r\n  [p: string]: string\r\n}\r\nlet _baseHeaders: Headers\r\n\r\nfunction getHeaders(additionHeaders?: Headers) {\r\n  if (!_baseHeaders) {\r\n    _baseHeaders = {\r\n      //Authorization: `Basic ${base64.encode(`${getUsername()}:${getPassword()}`)}`,\r\n    }\r\n  }\r\n  return additionHeaders\r\n    ? {\r\n        ...additionHeaders,\r\n        ..._baseHeaders,\r\n      }\r\n    : {\r\n        ..._baseHeaders,\r\n      }\r\n}\r\n\r\nexport interface Options {\r\n  headers?: {\r\n    [p: string]: string\r\n  }\r\n  query?: URLSearchParams\r\n}\r\n\r\nfunction makeURL(...parts: string[]) {\r\n  return new URL(urljoin('', ...parts), BASE).toString()\r\n}\r\n\r\nexport async function get(from: string, options?: Options) {\r\n  const query = options?.query?.toString()\r\n  return fetch(makeURL(from, query ? `?${query}` : ''), {\r\n    method: 'GET',\r\n    headers: getHeaders(options && options.headers),\r\n  })\r\n}\r\n\r\nexport async function getRepoContents(path: string, repo: string, branch: string) {\r\n  return get(urljoin('/repos', repo, 'contents', path), {\r\n    query: new URLSearchParams([['branch', branch]]),\r\n    headers: { Accept: 'application/vnd.github.VERSION.raw' },\r\n  })\r\n}\r\n\r\nexport async function getJson<T>(path: string, options?: Options) {\r\n  try {\r\n    const resp = await get(path, options)\r\n    if (resp.status < 400 && (resp.headers.get('content-type') as string).indexOf('application/json') > -1) {\r\n      const body: T = await resp.json()\r\n      return body\r\n    } else {\r\n      throw new Error(`${resp.status} ${resp.statusText}\\n${await resp.text()}`)\r\n    }\r\n  } catch (err) {\r\n    throw err\r\n  }\r\n}\r\n\r\nexport interface Branch {\r\n  name: string\r\n  commit: {\r\n    sha: string\r\n    url: string\r\n  }\r\n}\r\n\r\nexport async function getBranches(repo: string, perPage = 30, page = 1) {\r\n  return getJson<Branch[]>(urljoin('/repos', repo, 'branches'), {\r\n    query: new URLSearchParams([\r\n      ['per_page', perPage + ''],\r\n      ['page', page + ''],\r\n    ]),\r\n  })\r\n}\r\n\r\nexport async function getFileContent(repo: string, from: string, options?: Options) {\r\n  try {\r\n    const body = await getJson<{\r\n      content: string\r\n      encoding: 'base64' | string\r\n    }>(urljoin('/repos', repo, 'contents', from), options)\r\n    if (body.encoding === 'base64') {\r\n      return base64.decode(body.content)\r\n    } else {\r\n      throw new Error(`encoding format ${body.encoding} is not supported`)\r\n    }\r\n  } catch (err) {\r\n    throw err\r\n  }\r\n}\r\n\r\nexport interface TreeNode {\r\n  path: string\r\n  mode: string\r\n  type: 'tree' | 'blob'\r\n  size?: number\r\n  sha: string\r\n  url: string\r\n}\r\n\r\nlet _allTree: Array<TreeNode>\r\n\r\nexport async function getTree(repo: string, branch: string, path?: string) {\r\n  if (!_allTree) {\r\n    const resp = await getJson<{\r\n      sha: string\r\n      url: string\r\n      tree: Array<TreeNode>\r\n    }>(urljoin('/repos', repo, 'git/trees', branch), { query: new URLSearchParams([['recursive', `true`]]) })\r\n    _allTree = resp.tree\r\n  }\r\n  if (path) {\r\n    const regExp = new RegExp(`^${path}\\/`, '')\r\n    return _allTree.filter((tree) => regExp.test(tree.path))\r\n  }\r\n  return _allTree\r\n}\r\n","import { ReplaySubject, combineLatest, BehaviorSubject } from 'rxjs'\r\nimport { filter, map, tap } from 'rxjs/operators'\r\nimport { $path, $owner, $repo } from './general'\r\nimport { getBranches, Branch } from 'services/github'\r\n\r\nconst owner = new BehaviorSubject<string>('')\r\n$owner.subscribe(owner)\r\nconst repo = new BehaviorSubject<string>('')\r\n$repo.subscribe(repo)\r\n\r\nconst $branches = new ReplaySubject<Branch[]>(1)\r\n\r\ncombineLatest([owner, repo])\r\n  .pipe(\r\n    filter(([owner, repo]) => !!owner && !!repo),\r\n    map(([owner, repo]) => `${owner}/${repo}`)\r\n  )\r\n  .subscribe((op) => {\r\n    ;(async () => {\r\n      try {\r\n        const branches = await getBranches(op)\r\n        $branches.next(branches)\r\n      } catch (err) {\r\n        console.error('failed to list branches')\r\n        console.error(err)\r\n      }\r\n    })()\r\n  })\r\n\r\n// const $tree = new ReplaySubject<Map<string, TreeNode>>(1)\r\n\r\n// ;(async () => {\r\n//   const tree = await getTree()\r\n//   const map = new Map(tree.map((node) => [node.path, node]))\r\n//   $tree.next(map)\r\n// })()\r\n\r\ninterface NameTree {\r\n  [p: string]: NameTree\r\n}\r\n\r\nconst $branchNames = $branches.pipe(\r\n  filter((branches) => Boolean(branches) && branches.length > 0),\r\n  map((branches) => branches.map((branch) => branch.name)),\r\n  tap((names) => {\r\n    console.log(`branch list:\\n`)\r\n    console.log(names)\r\n  }),\r\n  map((names) =>\r\n    names.reduce((a, c) => {\r\n      const segments = c.split('/').filter((p) => p)\r\n      let current = a\r\n      for (let segName of segments) {\r\n        if (!current[segName]) {\r\n          current[segName] = {}\r\n        }\r\n        current = current[segName]\r\n      }\r\n      return a\r\n    }, {} as NameTree)\r\n  ),\r\n  tap((nameTree) => console.log(nameTree))\r\n)\r\n\r\n// file path is the path without branch\r\nconst $branch = combineLatest([$branchNames, $path]).pipe(\r\n  tap(([branchNames, path]) => {\r\n    console.log('Start log $branch...\\nbranchNames:\\n')\r\n    console.log(branchNames)\r\n    console.log(`path=${path}`)\r\n    console.log('End log $branch')\r\n  }),\r\n  map(([branchNames, path]) => {\r\n    // find the longest match from branch name to path, and that's is the current working branch\r\n\r\n    const pathSegs = path.split('/').filter((p) => p)\r\n    let i = 0\r\n\r\n    let branchSegs: string[] = []\r\n    let nameTree = branchNames\r\n    while (nameTree[pathSegs[i]]) {\r\n      branchSegs.push(pathSegs[i])\r\n      i++\r\n    }\r\n    return branchSegs.join('/')\r\n  })\r\n)\r\n\r\nconst $fileRelativePath = combineLatest([$path, $branch]).pipe(map(([path, branch]) => path.replace(`${branch}/`, '')))\r\n\r\nconst $filePath = combineLatest([$path, $branch]).pipe(map(([path, branch]) => path.replace(`${branch}`, '')))\r\n\r\nexport { $branchNames, $branch, $fileRelativePath, $filePath }\r\n","/**\r\n * resolved markdown, such as replace relative path of image as public url\r\n */\r\n\r\nimport { $input } from './general'\r\nimport { $filePath } from './github'\r\nimport { BehaviorSubject, combineLatest } from 'rxjs'\r\nimport { map } from 'rxjs/operators'\r\n\r\n// Internal link could be relative or absolute, ends with or without .md\r\nfunction computePath(path: string, pwd: string) {\r\n  if (path.charAt(0) === '/') {\r\n    return path\r\n  }\r\n\r\n  let i = 0\r\n  let j = 0\r\n\r\n  while (i < path.length) {\r\n    const indexP = path.indexOf('/', i)\r\n    if (indexP < 0) {\r\n      break\r\n    }\r\n    const ep = path.slice(i, indexP)\r\n    if (ep === '..') {\r\n      i = indexP + 1\r\n      j++\r\n    } else if (ep === '.') {\r\n      i = indexP + 1\r\n    } else {\r\n      break\r\n    }\r\n  }\r\n\r\n  const resolvedPath = path.slice(i)\r\n  let resolvedParent = pwd.charAt(pwd.length - 1) === '/' ? pwd : pwd + '/'\r\n\r\n  while (j > 0) {\r\n    resolvedParent = resolvedParent.slice(0, -1)\r\n    if (resolvedParent.length < 1) {\r\n      break\r\n    }\r\n    resolvedParent = resolvedParent.slice(0, -1 * resolvedParent.lastIndexOf('/'))\r\n  }\r\n\r\n  return `${resolvedParent}${resolvedPath}`\r\n}\r\n\r\nfunction getAbsolutePath(path: string, pwd: string) {\r\n  if (!!path && !!pwd) {\r\n    if (path.charAt(0) === '/') {\r\n      return path\r\n    } else {\r\n      return computePath(path, pwd)\r\n    }\r\n  }\r\n  return '/'\r\n}\r\n\r\nconst linkMap = new Map<string, string>()\r\n\r\nconst imageRegex = /(?<=!)\\[([^\\[\\]]+)\\]\\(([^\\(\\)]*)\\)/gi\r\n\r\nconst isPublicURL = (src: string) => /^(https?:)?\\/\\//.test(src)\r\n\r\nconst markdown$ = new BehaviorSubject<string>('')\r\n\r\ncombineLatest([$input, $filePath])\r\n  .pipe(\r\n    map(([input, filePath]) => ({\r\n      input,\r\n      filePath,\r\n    }))\r\n  )\r\n  .subscribe(({ input, filePath }) => {\r\n    ;(async () => {\r\n      const links = Array.from(input.matchAll(imageRegex)).map(([, alt, src]) => ({ alt, src }))\r\n      const pwd = filePath?.substring(0, filePath.lastIndexOf('/') + 1) as string\r\n      const resolvedLink = await Promise.all(\r\n        links.map(async ({ alt, src }) => {\r\n          if (isPublicURL(src)) {\r\n            return { alt, src, origin: src }\r\n          }\r\n          if (linkMap.has(src)) {\r\n            return { alt, src: linkMap.get(src), origin: src }\r\n          }\r\n          const imagePath = getAbsolutePath(src, pwd)\r\n          linkMap.set(src, imagePath)\r\n          return { alt, src: imagePath, origin: src }\r\n        })\r\n      )\r\n      // modifiy markdown\r\n      let markdown = input\r\n      resolvedLink.forEach(({ alt, src, origin }) => {\r\n        markdown = markdown.replace(`![${alt}](${origin})`, `![${alt}](${src})`)\r\n      })\r\n      markdown$.next(markdown)\r\n    })()\r\n  })\r\n\r\nexport default markdown$\r\n","import { BehaviorSubject, combineLatest, interval } from 'rxjs'\r\nimport { distinctUntilChanged, map, shareReplay, tap } from 'rxjs/operators'\r\n\r\nexport interface PluginProps {\r\n  readonly id: string\r\n  name: string\r\n  url: string\r\n  readonly createdAt: Date\r\n  updatedAt?: Date\r\n}\r\n\r\nexport type SelectedPlugin = string\r\n\r\nexport const plugins$ = new BehaviorSubject<Array<PluginProps>>([])\r\nexport const selectedPlugin$ = new BehaviorSubject<string | null>(null)\r\n\r\nexport const preferences$ = combineLatest([plugins$, selectedPlugin$]).pipe(\r\n  map(([plugins, selectedPlugin]) => ({ plugins, selectedPlugin })),\r\n  distinctUntilChanged(),\r\n  shareReplay(2)\r\n)\r\n","import { useState, useCallback, useEffect } from 'react'\r\nimport { combineLatest } from 'rxjs'\r\nimport { distinctUntilChanged, map, filter } from 'rxjs/operators'\r\nimport { sendReadySignal, $owner, $repo } from 'states/general'\r\nimport { $branch } from 'states/github'\r\nimport markdown$ from 'states/markdown'\r\nimport { useObservable } from 'rxjs-hooks'\r\nimport { InputMsgForRenderer } from 'shared'\r\nimport { plugins$, selectedPlugin$, PluginProps } from 'states/preferences'\r\n\r\nenum LoadState {\r\n  Loading,\r\n  Loaded,\r\n  Failed,\r\n}\r\n\r\nclass PluginsLoader {\r\n  cache: Record<string, LoadState>\r\n  constructor() {\r\n    this.cache = {}\r\n  }\r\n\r\n  async load(plugin: PluginProps, tagName = `markdown-renderer-${plugin.id}`) {\r\n    if (this.cache[plugin.id] === LoadState.Loading || this.cache[plugin.id] === LoadState.Loaded) {\r\n      return tagName\r\n    }\r\n    try {\r\n      this.cache[plugin.id] = LoadState.Loading\r\n      const resp = await fetch(plugin.url)\r\n      const text = await resp.text()\r\n\r\n      const script = document.createElement('script')\r\n      script.type = 'text/javascript'\r\n      script.text = text\r\n      document.body.appendChild(script)\r\n      //@ts-ignore\r\n      window.setup_markdown_renderer(tagName)\r\n\r\n      this.cache[plugin.id] = LoadState.Loaded\r\n    } catch (err) {\r\n      this.cache[plugin.id] = LoadState.Failed\r\n      throw err\r\n    } finally {\r\n      return tagName\r\n    }\r\n  }\r\n  isLoaded(plugin: PluginProps) {\r\n    return this.cache[plugin.id] === LoadState.Loaded\r\n  }\r\n  isLoading(plugin: PluginProps) {\r\n    return this.cache[plugin.id] === LoadState.Loading\r\n  }\r\n}\r\n\r\nconst pluginLoader = new PluginsLoader()\r\n\r\nconst plugin$ = combineLatest([plugins$, selectedPlugin$.pipe(distinctUntilChanged())]).pipe(\r\n  map(([plugins, id]) => {\r\n    return plugins.find((p) => p.id === id)\r\n  }),\r\n  filter((p) => !!p),\r\n  map((p) => p as PluginProps)\r\n)\r\n\r\nfunction pluginToTag(plugin: PluginProps) {\r\n  return `markdown-renderer-${plugin.id}`\r\n}\r\n\r\nplugin$.subscribe((plugin) => {\r\n  if (pluginLoader.isLoading(plugin) || pluginLoader.isLoaded(plugin)) {\r\n    console.debug('skip load plugin since it is loading or loaded')\r\n  } else {\r\n    pluginLoader.load(plugin, pluginToTag(plugin)).catch((err) => {\r\n      alert(err)\r\n    })\r\n  }\r\n})\r\n\r\nconst tag$ = plugin$.pipe(map((p) => pluginToTag(p)))\r\n\r\nconst msg$ = combineLatest([$owner, $repo, $branch, markdown$.pipe(distinctUntilChanged())]).pipe(\r\n  map(([owner, repo, branch, markdown]) => {\r\n    return {\r\n      markdown: markdown,\r\n      metadata: {\r\n        owner,\r\n        repo,\r\n        branch,\r\n      },\r\n    } as InputMsgForRenderer\r\n  })\r\n)\r\n\r\nfunction Home() {\r\n  const msg = useObservable(() => msg$)\r\n  const Tag = useObservable(() => tag$, 'div')\r\n\r\n  useEffect(() => {\r\n    sendReadySignal()\r\n  }, [])\r\n\r\n  return (\r\n    <div\r\n      css={`\r\n        width: 100%;\r\n        overflow: auto;\r\n        background-color: #fff;\r\n      `}>\r\n      <div id=\"renderer-box\">\r\n        <Tag markdown={msg?.markdown} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Home\r\n","import { useState, useCallback } from 'react'\r\nimport Card from 'react-bootstrap/Card'\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport Tabs from 'react-bootstrap/Tabs'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport { useObservable } from 'rxjs-hooks'\r\nimport md5 from 'md5'\r\nimport { plugins$, PluginProps, selectedPlugin$ } from 'states/preferences'\r\n\r\nfunction Plugin({ id, name, createdAt, updatedAt }: PluginProps) {\r\n  const selected = useObservable(() => selectedPlugin$, null)\r\n  const handleClick = useCallback(() => {\r\n    selectedPlugin$.next(id)\r\n  }, [])\r\n  return (\r\n    <Card\r\n      css={`\r\n        background-color: ${selected === id ? '#f5f5f5' : '#fff'};\r\n      `}\r\n      onClick={handleClick}>\r\n      <Card.Body>\r\n        <Card.Title>{name}</Card.Title>\r\n        <Card.Text>\r\n          <span>created at {createdAt.toLocaleDateString()}</span>\r\n          {updatedAt ? <span>last updated at {updatedAt.toLocaleDateString()}</span> : null}\r\n        </Card.Text>\r\n      </Card.Body>\r\n    </Card>\r\n  )\r\n}\r\n\r\nexport function Plugins() {\r\n  const plugins = useObservable(() => plugins$, [])\r\n  const [show, setShow] = useState<boolean>(false)\r\n  const handleCreate = useCallback(() => setShow(true), [])\r\n  const handleClose = useCallback(() => setShow(false), [])\r\n  const [plugin, setPlugin] = useState<Partial<PluginProps>>({ name: '', url: '' })\r\n  const handleOk = useCallback(() => {\r\n    if (!(plugin.name && plugin.url)) {\r\n      return\r\n    }\r\n    const p = { ...plugin, id: md5(plugin.url), createdAt: new Date() } as PluginProps\r\n    if (plugin) {\r\n      plugins$.next([...plugins$.value, p])\r\n    }\r\n    setPlugin({ name: '', url: '' })\r\n    setShow(false)\r\n  }, [plugin])\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Modal show={show} onHide={handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>Create you own plugin</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <InputGroup className=\"mb-3\">\r\n              <InputGroup.Text id=\"basic-addon1\">Name</InputGroup.Text>\r\n              <Form.Control\r\n                placeholder=\"Input a meaningful name\"\r\n                aria-label=\"plugin-name\"\r\n                aria-describedby=\"name of this plugin\"\r\n                name=\"name\"\r\n                value={plugin?.name}\r\n                onChange={(e) => setPlugin((p) => ({ ...p, name: e.target.value }))}\r\n              />\r\n            </InputGroup>\r\n            <InputGroup>\r\n              <InputGroup.Text>URL</InputGroup.Text>\r\n              <Form.Control\r\n                as=\"textarea\"\r\n                aria-label=\"plugin-url\"\r\n                name=\"url\"\r\n                value={plugin?.url}\r\n                onChange={(e) => setPlugin((p) => ({ ...p, url: e.target.value }))}\r\n              />\r\n            </InputGroup>\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={handleOk}>\r\n              Save\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n        <Button onClick={handleCreate}>Create</Button>\r\n      </div>\r\n      {plugins.map((plugin) => (\r\n        <Plugin key={plugin.id} {...plugin} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function Preferences() {\r\n  return (\r\n    <Tabs defaultActiveKey=\"plugins\" id=\"uncontrolled-tab-example\" className=\"mb-3\">\r\n      <Tab eventKey=\"general\" title=\"General\">\r\n        General information\r\n      </Tab>\r\n      <Tab eventKey=\"plugins\" title=\"Plugins\">\r\n        <Plugins />\r\n      </Tab>\r\n    </Tabs>\r\n  )\r\n}\r\n","import { Msg, makeMsg } from 'shared'\r\nimport { preferences$ } from './preferences'\r\n\r\nexport function send<T>(msg: Msg.Msg<T>) {\r\n  window.parent.postMessage(msg, '*')\r\n}\r\n\r\nexport function sendReadySignal() {\r\n  console.log('send appready signal')\r\n  send(makeMsg([Msg.From.Iframe, Msg.Category.IframeReady], true))\r\n}\r\n\r\nexport function sendPreferences(info: any) {\r\n  console.log('send preferences', info)\r\n  send(makeMsg([Msg.From.Iframe, Msg.Category.Preferences], info))\r\n}\r\n\r\npreferences$.subscribe((p) => {\r\n  sendPreferences(p)\r\n})\r\n","import Home from 'pages/home'\r\nimport Preferences from 'pages/preferences'\r\nimport { BrowserRouter, Routes, Route, Link } from 'react-router-dom'\r\nimport { plugins$ } from 'states/preferences'\r\nimport { useObservable } from 'rxjs-hooks'\r\nimport 'states/send-msg'\r\nimport './app.sass'\r\n\r\nfunction Toolbar() {\r\n  const plugins = useObservable(() => plugins$, [])\r\n  return (\r\n    <div>\r\n      Toolbar\r\n      <Link to=\"/\">Home</Link>\r\n      <Link to=\"/preferences\">Preferences</Link>\r\n      <span>{plugins.length} plugins available</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default function App() {\r\n  return (\r\n    <main>\r\n      <BrowserRouter>\r\n        <Toolbar />\r\n        <Routes>\r\n          <Route path=\"/\">\r\n            <Route index element={<Home />} />\r\n            <Route path=\"preferences\" element={<Preferences />} />\r\n          </Route>\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </main>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.sass'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Msg = void 0;\nexports.makeMsg = makeMsg;\n\nvar _nanoid = require(\"nanoid\");\n\nvar Msg;\nexports.Msg = Msg;\n\n(function (_Msg) {\n  var From;\n\n  (function (From) {\n    From[From[\"Content\"] = 0] = \"Content\";\n    From[From[\"Iframe\"] = 1] = \"Iframe\";\n    From[From[\"Renderer\"] = 2] = \"Renderer\";\n  })(From || (From = {}));\n\n  _Msg.From = From;\n  var Category;\n\n  (function (Category) {\n    Category[Category[\"CMD\"] = 0] = \"CMD\";\n    Category[Category[\"InputChange\"] = 1] = \"InputChange\";\n    Category[Category[\"Path\"] = 2] = \"Path\";\n    Category[Category[\"General\"] = 3] = \"General\";\n    Category[Category[\"IframeReady\"] = 4] = \"IframeReady\";\n    Category[Category[\"Preferences\"] = 5] = \"Preferences\";\n  })(Category || (Category = {}));\n\n  _Msg.Category = Category;\n  var Phase;\n\n  (function (Phase) {\n    Phase[Phase[\"Request\"] = 0] = \"Request\";\n    Phase[Phase[\"Response\"] = 1] = \"Response\";\n  })(Phase || (Phase = {}));\n\n  _Msg.Phase = Phase;\n})(Msg || (exports.Msg = Msg = {}));\n\nfunction makeMsg(type, content) {\n  return {\n    id: (0, _nanoid.nanoid)(),\n    type: type,\n    content: content\n  };\n}"],"sourceRoot":""}